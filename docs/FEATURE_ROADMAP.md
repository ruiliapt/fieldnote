# Fieldnotes Lite - 功能路线图

**创建日期**: 2025-10-20  
**当前版本**: 0.1.1  
**参考工具**: FieldWorks, ELAN, Toolbox

---

## 🎯 定位

Fieldnotes Lite 作为 FieldWorks、ELAN 和 Toolbox 的**轻量级替代品**，专注于：
- 简单易用（非技术用户友好）
- 快速上手（5分钟开始工作）
- 核心功能（满足80%的田野调查需求）
- 离线工作（无需网络）

---

## 📊 参考工具功能对比

### FieldWorks Language Explorer (FLEx)
**核心功能**：
- ✅ Interlinear text（已有：三行对照）
- ❌ 词典管理
- ❌ 词形分析
- ❌ 语法范畴体系
- ❌ 词汇关系（同义词、反义词）
- ❌ 形态分析

### ELAN
**核心功能**：
- ❌ 音频/视频标注
- ❌ 时间轴对齐
- ❌ 多层标注（tiers）
- ✅ 数据导出（部分）
- ✅ 搜索功能

### Toolbox (SIL)
**核心功能**：
- ✅ Interlinear text
- ❌ 词典数据库
- ❌ SFM 格式支持
- ✅ 文本标注
- ❌ 跳转字段

---

## 🗺️ 功能扩展路线图

### 阶段 1: 核心增强 (v0.2.0) ⭐ 推荐优先实现

#### 1.1 多媒体关联
**优先级**: 🔥🔥🔥 高  
**难度**: 中等  
**用户需求**: 极高

**功能**:
- 为每条语料关联音频文件
- 支持播放音频
- 记录音频时间段（起始/结束）
- 导出时包含音频链接

**技术方案**:
- 使用 PyQt6 的音频播放组件
- 音频文件路径存储在数据库
- 支持 WAV、MP3、M4A 格式

**应用场景**:
```
例句: nə³³ tə⁵⁵ tɕʰi⁵⁵ fan³³
音频: recording_001.wav (0:15-0:18)
翻译: 我吃饭

用户点击播放按钮 → 听到发音
```

#### 1.2 标签系统
**优先级**: 🔥🔥🔥 高  
**难度**: 简单  
**用户需求**: 高

**功能**:
- 为语料添加多个标签
- 按标签分类和筛选
- 预设标签库（可扩展）
- 标签统计

**预设标签**:
```
语法类型: 陈述句、疑问句、祈使句、感叹句
话题: 问候、饮食、家庭、天气、交通
语法点: 被动、使役、否定、疑问
数据质量: 已审核、待审核、存疑
调查阶段: 初稿、复核、定稿
```

**界面设计**:
```
标签选择器（多选）:
☑ 陈述句  ☑ 饮食  ☐ 被动
☑ 已审核  ☐ 待审核

侧边栏标签云:
陈述句(125) 疑问句(43) 饮食(67)
家庭(52) 被动(23) 使役(15)
```

#### 1.3 高级搜索
**优先级**: 🔥🔥 中高  
**难度**: 中等  
**用户需求**: 高

**功能**:
- 正则表达式搜索
- 组合搜索（多条件）
- 搜索历史
- 保存搜索查询
- 搜索结果导出

**搜索界面**:
```
高级搜索：
┌─────────────────────────────────┐
│ 原文包含:  [ŋa.*tɕʰi]  (正则)   │
│ 词汇分解包含: [1SG]              │
│ 标签包含:  [饮食] [陈述句]       │
│ 例句编号:  [CJ*]                 │
│ 日期范围:  [2025-01-01] 到 [今天]│
│                                 │
│ 匹配方式: ○全部匹配 ●任意匹配    │
│                                 │
│ [保存查询] [搜索] [清空]         │
└─────────────────────────────────┘
```

#### 1.4 数据统计
**优先级**: 🔥🔥 中高  
**难度**: 简单  
**用户需求**: 中

**功能**:
- 语料数量统计
- 词频统计
- 标签分布
- 时间趋势
- 统计图表

**统计面板**:
```
数据统计：
├─ 总语料数: 1,234 条
├─ 本月新增: 156 条
├─ 平均每日: 5.2 条
├─ 最常用词: nə³³ (234次), tə⁵⁵ (189次)
├─ 标签分布:
│   ├─ 陈述句: 45%
│   ├─ 疑问句: 23%
│   └─ 其他: 32%
└─ 数据质量:
    ├─ 已审核: 67%
    └─ 待审核: 33%
```

---

### 阶段 2: 专业功能 (v0.3.0)

#### 2.1 简易词典
**优先级**: 🔥🔥 中高  
**难度**: 中等  
**用户需求**: 中高

**功能**:
- 词条管理（词头、词类、释义）
- 例句引用（从语料库）
- 形态变化记录
- 词典导出

**词典界面**:
```
词条: nə³³
词类: 代词
释义: 我，第一人称单数
例句: [链接到 3 条语料]
相关: nə³³-ni³³ (我的)

[新建词条] [编辑] [删除]
```

#### 2.2 形态标注增强
**优先级**: 🔥 中  
**难度**: 中等  
**用户需求**: 中

**功能**:
- 分层标注（morpheme/gloss/POS）
- 标注模板
- 标注规范检查
- Leipzig Glossing Rules 支持

**标注界面**:
```
原文: nə-ni     ŋuə    tɕʰi-le
形态: nə-ni     ŋuə    tɕʰi-le
词汇: 1SG-GEN   rice   eat-PFV
词性: PRON-CASE NOUN   VERB-ASP
翻译: 我吃了饭

[检查标注] [应用模板]
```

#### 2.3 导出增强
**优先级**: 🔥 中  
**难度**: 中高  
**用户需求**: 中

**支持格式**:
- ✅ Word (已支持)
- ❌ ELAN (.eaf)
- ❌ FLEx (.flextext)
- ❌ Toolbox (.txt, SFM)
- ❌ LaTeX (gb4e, linguex)
- ❌ HTML (网页展示)
- ❌ PDF (论文格式)

**ELAN 导出示例**:
```xml
<TIER TIER_ID="utterance">
  <ANNOTATION>
    <ALIGNABLE_ANNOTATION TIME_SLOT_REF1="ts1" TIME_SLOT_REF2="ts2">
      <ANNOTATION_VALUE>nə³³ tə⁵⁵ tɕʰi⁵⁵ fan³³</ANNOTATION_VALUE>
    </ALIGNABLE_ANNOTATION>
  </ANNOTATION>
</TIER>
```

#### 2.4 协作功能
**优先级**: 🔥 中低  
**难度**: 高  
**用户需求**: 中

**功能**:
- 导出/导入增量更新
- 冲突检测
- 变更日志
- 多用户标识

---

### 阶段 3: 高级功能 (v0.4.0)

#### 3.1 文本分析
**优先级**: 🔥 中低  
**难度**: 高  
**用户需求**: 中低

**功能**:
- 自动分词建议
- 词频分析
- 搭配分析
- N-gram 统计

#### 3.2 语法范畴管理
**优先级**: 🔥 低  
**难度**: 高  
**用户需求**: 低

**功能**:
- 自定义语法标签库
- 标签层级关系
- 标签验证规则

#### 3.3 项目管理
**优先级**: 🔥 中低  
**难度**: 中等  
**用户需求**: 中

**功能**:
- 多项目管理
- 项目信息（语言、地点、调查人）
- 元数据管理
- 项目归档

---

## 🎯 推荐实现顺序

### 短期（1-2个月）
1. **标签系统** - 简单且实用
2. **数据统计** - 提供价值感
3. **高级搜索** - 增强核心功能

### 中期（3-6个月）
4. **音频关联** - 核心需求
5. **简易词典** - 专业功能
6. **导出增强** - 兼容性

### 长期（6个月+）
7. **形态标注增强** - 高级功能
8. **协作功能** - 团队需求
9. **文本分析** - 研究辅助

---

## 💡 快速实现建议

### 快赢功能（Quick Wins）

这些功能实现简单但用户价值高：

#### 1. 备注分类（1天）
```python
# 在 notes 字段添加结构化标记
notes = "[语音] 声调略高 [语法] 可能是方言" 
```

#### 2. 导出选项（1天）
```
导出时可选：
☑ 包含编号
☑ 包含备注  
☐ 仅标记语料
☐ 按标签分组
```

#### 3. 快捷输入（2天）
```
常用符号工具栏：
[ə] [ŋ] [ɕ] [˥] [˧] [˩] [→] [≈]
点击插入到光标位置
```

#### 4. 批量编辑（2天）
```
选中多条语料 → 批量操作：
• 添加标签
• 修改状态
• 批量删除
```

#### 5. 数据验证（2天）
```
检查规则：
• 原文为空警告
• 词汇分解和原文词数不匹配提示
• 重复例句编号警告
```

---

## 🔄 现有功能优化

### 优化 1: Word 导出增强
**当前**: 基础三行表格  
**建议**:
- 添加页眉页脚（项目信息）
- 目录自动生成
- 按标签分章节
- 添加索引
- 符号表

### 优化 2: 搜索增强
**当前**: 简单关键词搜索  
**建议**:
- 搜索结果高亮
- 搜索结果排序
- 搜索历史
- 搜索建议

### 优化 3: 界面改进
**当前**: 三标签页布局  
**建议**:
- 侧边栏（标签、统计）
- 工具栏（常用操作）
- 状态栏增强（统计信息）
- 快捷键提示

---

## 📋 功能实现优先级矩阵

| 功能 | 用户价值 | 实现难度 | 优先级 | 预计工时 |
|------|---------|---------|--------|---------|
| **标签系统** | ⭐⭐⭐⭐⭐ | 简单 | 🔥🔥🔥 | 3天 |
| **数据统计** | ⭐⭐⭐⭐ | 简单 | 🔥🔥🔥 | 2天 |
| **音频关联** | ⭐⭐⭐⭐⭐ | 中等 | 🔥🔥🔥 | 5天 |
| **高级搜索** | ⭐⭐⭐⭐ | 中等 | 🔥🔥 | 3天 |
| **快捷输入** | ⭐⭐⭐⭐ | 简单 | 🔥🔥 | 2天 |
| **简易词典** | ⭐⭐⭐⭐ | 中等 | 🔥🔥 | 5天 |
| **批量编辑** | ⭐⭐⭐ | 简单 | 🔥🔥 | 2天 |
| **ELAN导出** | ⭐⭐⭐ | 中高 | 🔥 | 4天 |
| **协作功能** | ⭐⭐⭐ | 高 | 🔥 | 10天 |
| **形态标注** | ⭐⭐⭐ | 中高 | 🔥 | 6天 |

---

## 🎨 界面设计建议

### 新布局建议

```
┌─────────────────────────────────────────────────────┐
│ Fieldnotes Lite  [文件] [编辑] [查看] [工具] [帮助]   │
├──────┬─────────────────────────────────────────────┤
│ 标签  │ 数据管理                                    │
│ 面板  │ ┌─────────────────────────────────────────┐ │
│      │ │ 例句编号: [CJ001]         🎵 [关联音频] │ │
│ 全部  │ │ 原文: [                ]  ⚡ 快捷符号   │ │
│(1234)│ │ 词汇分解: [              ]               │ │
│      │ │ 翻译: [                  ]               │ │
│ 陈述句│ │ 备注: [                  ]               │ │
│ (567)│ │                                          │ │
│      │ │ 标签: ☑陈述句 ☐疑问句 ☑饮食            │ │
│ 疑问句│ │                                          │ │
│ (234)│ │ [添加] [更新] [删除] [清空]             │ │
│      │ └─────────────────────────────────────────┘ │
│ 饮食  │                                             │
│ (178)│ ┌─────────────────────────────────────────┐ │
│      │ │ ID | 编号 | 原文 | 翻译 | 标签          │ │
│ +新建│ │ 1  | CJ01 | ...  | ...  | 陈述句,饮食   │ │
│      │ │ 2  | CJ02 | ...  | ...  | 疑问句       │ │
└──────┴─────────────────────────────────────────────┘
│ 语料: 1234条 | 今日新增: 5条 | 数据库: corpus.db    │
└─────────────────────────────────────────────────────┘
```

---

## 🚀 最小可行功能集（MVP++）

如果要在**2周内**快速增强，建议实现：

### Week 1
1. **标签系统**（3天）
   - 数据库添加 tags 字段
   - 界面添加标签选择器
   - 按标签筛选

2. **数据统计**（2天）
   - 统计面板
   - 基础图表

### Week 2
3. **快捷符号输入**（1天）
   - 符号工具栏
   - 常用 IPA 符号

4. **高级搜索**（2天）
   - 多条件搜索
   - 正则表达式

5. **批量操作**（2天）
   - 批量标签
   - 批量删除

**结果**: 从基础工具 → 实用工具

---

## 📚 学习资源

### 参考格式标准
- **Leipzig Glossing Rules**: https://www.eva.mpg.de/lingua/resources/glossing-rules.php
- **SFM (Standard Format Marker)**: Toolbox 格式
- **ELAN XML Format**: https://archive.mpi.nl/tla/elan
- **FLEx Text**: FieldWorks 导出格式

### 开源项目参考
- **LingPy**: Python 语言学库
- **nltk**: 自然语言处理
- **Praat-parselmouth**: 音频分析

---

## 💬 用户反馈优先

建议在添加功能前：
1. 调查实际用户需求
2. 分析使用频率
3. 评估学习成本
4. 保持简单原则

**核心理念**: "能用 > 好用 > 强大"

---

## 📝 总结

### 最推荐优先实现的 Top 5：

1. **标签系统** 🏆
   - 最实用
   - 最容易实现
   - 用户价值高

2. **音频关联** 🎵
   - 核心需求
   - 区别于简单工具
   - 专业性提升

3. **数据统计** 📊
   - 提供洞察
   - 实现简单
   - 增加价值感

4. **快捷输入** ⚡
   - 提高效率
   - 用户体验好
   - 实现简单

5. **高级搜索** 🔍
   - 增强核心功能
   - 专业用户需要
   - 中等难度

---

**路线图持续更新** - Fieldnotes Lite 开发团队

